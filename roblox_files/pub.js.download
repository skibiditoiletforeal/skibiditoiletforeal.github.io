/* HouseHold LegacyMode */
(()=>{var vt=Object.defineProperty,Te=Object.defineProperties,Ee=Object.getOwnPropertyDescriptor,_e=Object.getOwnPropertyDescriptors;var Bt=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var At=(n,t,e)=>t in n?vt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,X=(n,t)=>{for(var e in t||(t={}))Ae.call(t,e)&&At(n,e,t[e]);if(Bt)for(var e of Bt(t))ve.call(t,e)&&At(n,e,t[e]);return n},rt=(n,t)=>Te(n,_e(t)),i=(n,t)=>vt(n,"name",{value:t,configurable:!0});var u=(n,t,e,r)=>{for(var o=r>1?void 0:r?Ee(t,e):t,s=n.length-1,a;s>=0;s--)(a=n[s])&&(o=(r?a(t,e,o):a(o))||o);return r&&o&&vt(t,e,o),o};var d=(n,t,e)=>At(n,typeof t!="symbol"?t+"":t,e);var y=(n,t,e)=>new Promise((r,o)=>{var s=f=>{try{g(e.next(f))}catch(m){o(m)}},a=f=>{try{g(e.throw(f))}catch(m){o(m)}},g=f=>f.done?r(f.value):Promise.resolve(f.value).then(s,a);g((e=e.apply(n,t)).next())});var l={modules:["LegacyLayer","SignalsIds","SignalsBsc","SignalsVlp","SignalsTvp","SignalsAbs","SignalsAutoInsertion","GptMeasurement","TimeConfig","PLEMetrics","SignalsCct","SignalsCbs","PgaTourConfig","WeatherConfig","BloombergConfig","SmokeTestConfig"],configs:{"RFY3NDg3MjI=":[0,1,2,3,4,5,6],RFYxNDI4ODMy:[0,1,2,3,4,5,6,7],RFYxMTA2NzY0:[0,1,2,3,4,5,6],RFYxNDM5Nzcx:[0,1,2,3,4,5,6],"RFY3NTk1MjA=":[0,1,2,3,4,5,6,7,8],RFYxMDgzNzg4:[0,1,2,3,4,6],"RFY1ODc0MTQ=":[0,1,2,3,4,5,6,9],"RFY3OTc2ODY=":[0,1,2,3,4,5,6],"RFY5NDU5ODg=":[0,1,2,3,4,5,6,7],RFYxMDU4Nzk0:[0,1,2,3,4,6],RFYxNDc1MjYy:[0,1,2,3,4,5,6,7,9],RFYxMDE2NjU2:[0,1,2,3,4,5,6],"RFY0NjQwNDE=":[0,1,2,3,5,6,7,9],RFYxMjA4OTc5:[0,1,2,3,4,5],RFYxNDg0Mzcw:[0,1,2,3,4,5,6,7,9],RFYxNDQ1OTEw:[0,1,2,3,4,5,6],RFYxMzkwOTY5:[0,1,2,3,4,5,6,7],"RFY4MDU2MDE=":[0,1,3,4],RFYxNDQzMjkx:[0,1,2,3,4,6,7],RFYxMTQ3ODUx:[0,1,2,3,4,6],RFYxNDcyMjYy:[0,1,10,2,3,4,5,6,7],"RFY5NDIxOTY=":[0,1,2,3,4,5,6],RFYxNTg4MjM1:[0,1,11,2,3,4,6],RFYxNDQ2MDE5:[0,1,2,3,4,5,6,7,9],RFYxNDQ5NjYz:[0,1,2,3,4,5,6,7,9],RFYxMzY0NzM5:[0,1,2,3,4,5,6,7],RFYxNDg1NjU0:[12,6,7],"RFY0NjQwMjE=":[0,1,2,3,4,5,6],RFYxMjAzNDUy:[0,1,13,2,3,4,6,7],RFYxMDcxNDY3:[0,1,2,3,4,5,6],"RFY5NzQ3MzI=":[],"RFYzNzU5MzU=":[0,1,2,3,6],RFYxMzc5MTY2:[0,1,2,3,4,5,6,7],RFYxNjYyMjUy:[0,1,14,2,6,7],RFYxMTYxMjU5:[],RFYxNTkyNzQ5:[0,1,2,3,4,5,6,7],"RFY0NjUxNTc=":[0,1,2,3,4,6,7],"RFY3NTc3MzA=":[0,1,2,3,4,6],RFYxMzk1MTgy:[0,1,2,3,4,5,6,9],RFYxMDM2Nzc2:[0,1,2,5],RFYxNTIyMDY2:[6,7],RFYxMjkzODQ1:[0,5,6],RFYxMzExMDk0:[0,1,2,3,4,5,6,9],"RFY3MTg2ODU=":[0,1],RFYxMjg5MDY0:[0,1,6],RFYxNDQ1OTU1:[0,1,2,3,4,5,6,7],RFYxMDI2NTMx:[0,1,2,3,4,6],"RFY4MDkxOTk=":[0,1,2,3,4,6],RFYxMzg3OTYw:[12,6,7],RFYxMDAxNjU0:[0,1,2,3,4,5,6],RFYxNDYyNzYz:[0,1,14,2,6,7],"RFY3OTI4NTU=":[0,1,3,6],RFYxNDU0MjMy:[0,1,2,3,4,5,6,7],RFYxMzkwOTk3:[0,1,2,3,4,5,6,7],RFYxNjY1OTEx:[0,1,2,3,4,5,6],"RFY2NjkzNjE=":[0,1,2,3,4,6],"RFY4MzIzNDY=":[0,1,2,6],RFYxMjc5MjEw:[0,1,2,3,4,5,6,7,9],"RFY2NzUwMzg=":[0,1,2,3,4,6],RFYxMjUwMjAy:[0,1,2,3,4,5,6],RFYxNDYyMDkz:[0,1,2,3,4,6,7],"RFYzNzQxNTg=":[0,1,2,3,6],RFYxNDEyMDU2:[0,1,2,3,4,5,6,7],RFYxMTA2MDA5:[0,1,5,6,7],RFYxMDEwNzI4:[0,1,2,3,4],RFYxMjk4NzIy:[0,1,2,3,4,5,6,9],RFYxNTU3NDQx:[0,1,2,3,4,5],RFYxNTMyNTMx:[0,1,2,3,4,5,6,7,9],"RFYxMTExMTE=":[0,1,2,3,4,6],"RFY5NzQ3MzE=":[0,1,2,3,4],"RFY2NDcwODg=":[0,1,2,3,4,6],"RFY2ODQzNDg=":[0,1,2,3,4,5,6,7],RFYxMjA4ODI5:[0,1,2,3,4,5,6],RFYxMDQ0MzMw:[0,1,2,3,4,5,6],RFYxMTg3NDkx:[0,1,2,3,4,6],RFYxMTcyOTg1:[0,1,2,3,4,5,6],RFYxMDEyNjAw:[0,5],RFYxMTQwNjg5:[6],"RFY5NzI5MzU=":[6],RFYxNDgzMzY5:[0,1,2,3,4,5,6],RFYxNDUyMzc3:[0,1,2,3,4,5,6,7],RFYxNTM0MTE4:[0,5,6,7],"RFY2NzM2NzI=":[0,1,2,3,4,5,6,9],RFYxMzQ5NzQ2:[0,1,2,3,4,5,6,7],RFYxMDgwMjEy:[0,1,2,3,4,5,6,7],RFYxNDcwMjg3:[6],RFYxMzM5NzYy:[0,1,2,3,4],"RFY5MDI5MjM=":[0,1,2,3,4,6],RFYxNjM2NDMy:[0,1,2,3,4,5,6,7],"RFY3Nzc4ODU=":[0,1,2,3,4,6],RFYxMTY4NjQ0:[0,1,2,3,4,6],RFYxMjk5NDUw:[0,1,2,3,4,5,6,7],RFYxMTU3NzY0:[0,1,2,3,4,6],RFYxNjA1NjQx:[0,1,2,3,4,5,6,7],"RFYzMTIwNDg=":[0,1,2,3,6],"RFY4MjE5MTg=":[0,1,2,3,4,6],"RFY0MjQ5NDA=":[0,1,2,3,6],RFYxMzIzODg3:[0,1,3,6,7,9],RFYxMzM5NzY5:[0,1,2,3,4,5,6,7],RFYxNDc4NzM4:[0,1,2,3,4,5,6],"RFY4NDY4Mjc=":[0,5,6],"RFY4NjYwMjU=":[0,1,2,3,4,6],"RFY4NjQ3ODc=":[0,5,6],"RFY5Nzg2NjI=":[6],RFYxMTA2NjUz:[0,1,2,3,4,5,6],RFYxMzk3OTY1:[6],"RFY2NTE3NDQ=":[0,1,2,3,4,5,6],RFYxMDIzOTQ1:[0,5,6,7],RFYxMzIzOTIy:[0,1,2,3,4,5,6],RFYxNTI4MTg3:[0,1,2,3,4,5,6,7],RFYxNDIyMTQ1:[0,1,2,5,6,9],RFYxMTA4MTY0:[0,1,2,3,4,5,6],"RFY5NzQ3MzA=":[0,1,2,3,4],RFYxNTc1Mjkz:[0,1,2,3,4,5,6,7],RFYxMzMxNjkz:[0,1,15,2,3,4,6,7],"RFY5MTA2Mzg=":[0,1,2],RFYxNDkyOTIx:[6],RFYxNDgxOTIx:[0,1,2,3,4,5,6,7],RFYxNDE0MzUz:[0,1,2,3,4,6],"RFY4OTMwNTY=":[0,1,2],"RFY0NjQwMzM=":[0,1,2,3,6],RFYxMzk2MzM4:[0,15,2,3,4,6,7],"RFY4MzIzNTM=":[0,1,2,6],RFYxNDc1MjY4:[0,5,6,7],RFYxMTEwOTk0:[0,1,2,3,4,5,6],RFYxMDExNDU1:[0,1,2,3,4,5,6],"RFY5NDMzOTk=":[0,1,2,3,4,5,6],RFYxNDczMDg4:[0,1,2,3,4,6],"RFY3MTA4Nzg=":[0,1,2,3,4,6],"RFY2NzI1MjE=":[0,1,2,3,4,6],RFYxNDcxMjQy:[0,1,2,3,4,5,6,7],RFYxNDc3NTM1:[0,1,2,3,4,5,6,7,9],RFYxMzA3Mzc3:[0,1,2,3,4,5,6],"RFY3MzQzNDI=":[0,1,2,3,4,5,6]}};var It={queueAdRequest:i(n=>{var t;try{(t=n.callback)==null||t.call(n),n.callback=null}catch(e){}},"queueAdRequest"),defineSlot:i((n,t)=>{},"defineSlot"),adRendered:i((n,t)=>{},"adRendered"),adRemoved:i(n=>{},"adRemoved"),getTargeting:i(n=>({}),"getTargeting"),addEventListener:i((n,t)=>{},"addEventListener"),removeEventListener:i((n,t)=>{},"removeEventListener"),toggleDebugMode:i(()=>{console.log("%c[UT-DEBUG]%c Debug mode is not available for this tag.","color: red","color: intial")},"toggleDebugMode"),_debugScriptLoaded:i(()=>{},"_debugScriptLoaded")};var xt=class xt{constructor(){d(this,"isEntryModule",!0)}};i(xt,"EntryModule");var lt=xt;var ft=class ft{constructor(t){d(this,"_error");d(this,"_message","unknown");d(this,"_trace",[]);if(t instanceof ft)return t;t instanceof Error&&(this._error=t,this._message=t.message)}get error(){return this._error}get message(){return this._message}get trace(){return this._trace}addToTrace(t){this.trace.unshift(t)}};i(ft,"TracedError");var J=ft;var wt=class wt{constructor(t,e){d(this,"window");d(this,"dvtag");d(this,"modules",new Map);d(this,"errorHandlers",[]);d(this,"errors",[]);var r;this.window=e,this.window.dvtag=(r=this.window.dvtag)!=null?r:{},this.dvtag=this.window.dvtag,this.dvtag._core=this;for(let[o,s]of Object.entries(It))this.dvtag[o]=s;for(let o of t)this.createModule(o);for(let o of this.modules.values())this.applyModuleDecoration(o);for(let o of this.modules.values())this.applyErrorDecoration(o);for(let o of this.modules.values())this.applyPluginDecoration(o);for(let o of this.modules.values())this.applyApiDecoration(o);for(let o of this.modules.values())this.applyExecuteDecoration(o)}get moduleList(){return[...this.modules.keys()].map(t=>t.name)}get entryModuleList(){return[...this.modules.entries()].filter(([t,e])=>e instanceof lt).map(([t,e])=>t.name)}get(t){return this.getModule(t).gateway}getByName(t){let e=[...this.modules.keys()].find(r=>r.name===t);return e!=null?this.get(e):null}getModule(t){let e=this.modules.get(t);if(e==null)throw new Error(`module not in core: ${t.name}`);return e}createModule(t){if(t.prototype.moduleConfig==null)throw new Error(`not a module: ${t.name}`);let e=new t;e.core=this,e.gateway={module:e},this.modules.set(t,e)}applyModuleDecoration(t){var o,s,a,g,f,m;let e=t.constructor.prototype.moduleConfig,r=t.constructor.name;for(let{method:h}of e){let I=t[h].bind(t),P=(a=(s=(o=this.dvtag._hooks)==null?void 0:o.interceptModule)==null?void 0:s[r])==null?void 0:a[h],T=P==null?I:P.bind(t),x=(m=(f=(g=this.dvtag._hooks)==null?void 0:g.inspectModule)==null?void 0:f[r])==null?void 0:m[h],D=x==null?T:(...F)=>{let S=T(...F);return x(F,S),S},_t=i((...F)=>{let S;try{S=D(...F)}catch(at){throw this.traceMethodError(t,h,F,at)}return S instanceof Promise?S.then(at=>at,at=>{throw this.traceMethodError(t,h,F,at)}):S},"traced");t.gateway[h]=_t}if(t.plugins!=null){t.pluginFunctions={};for(let h of Object.keys(t.plugins)){t.pluginFunctions[h]=[];let I=t.pluginFunctions[h];t.plugins[h]=(...P)=>{let T=[];for(let x of I)try{T.push(x(...P))}catch(D){this.tracePluginError(t,h,D)}return T}}}}traceMethodError(t,e,r,o){let s=new J(o);return s.addToTrace(`${t.constructor.name}.${e}(${r.map(a=>typeof a).join(",")})`),s}traceExecuteError(t){let e=new J(t);return e.addToTrace("@execute"),this.handleSevereError(e),e}tracePluginError(t,e,r){let o=new J(r);return o.addToTrace(`@plugin(${t.constructor.name}, '${e}')`),this.handleSevereError(o),o}traceApiError(t,e){let r=new J(e);return r.addToTrace(`@api('${t}')`),this.handleSevereError(r),r}handleSevereError(t){for(let e of this.errorHandlers)try{e(t)}catch(r){}this.errors.length>10||this.errors.push({message:t.message,trace:t.trace})}applyErrorDecoration(t){var r;let e=(r=t.constructor.prototype.errorConfig)!=null?r:[];for(let{method:o}of e)this.errorHandlers.push(t.gateway[o])}applyPluginDecoration(t){var r;let e=(r=t.constructor.prototype.pluginConfig)!=null?r:[];for(let{PluggableClass:o,category:s,method:a}of e)this.getModule(o).pluginFunctions[s].push(t.gateway[a])}applyApiDecoration(t){var r;let e=(r=t.constructor.prototype.apiConfig)!=null?r:[];for(let{api:o,method:s}of e)Object.defineProperty(this.dvtag,o,{value:i((...a)=>{var g,f;try{return t.gateway[s](...a)}catch(m){return this.traceApiError(o,m),(f=(g=It)[o])==null?void 0:f.call(g,...a)}},"value"),writable:!1})}applyExecuteDecoration(t){return y(this,null,function*(){var r;let e=(r=t.constructor.prototype.executeConfig)!=null?r:[];for(let{method:o}of e)try{yield t.gateway[o]()}catch(s){this.traceExecuteError(s)}})}};i(wt,"Core");var gt=wt;var bt=[],Pt=bt;var p=i(n=>{let t=n.prototype,e=Object.getOwnPropertyNames(t).filter(r=>{var o;return r!=="constructor"&&((o=Object.getOwnPropertyDescriptor(t,r))==null?void 0:o.value)instanceof Function});t.moduleConfig=e.map(r=>({method:r})),bt.push(n)},"moduleClass"),Z=i(n=>t=>{},"attachModule"),tt=i((n,t)=>{var e;n.executeConfig=(e=n.executeConfig)!=null?e:[],n.executeConfig.push({method:t})},"executeMethod"),R=i((n,t)=>(e,r)=>{var o;e.pluginConfig=(o=e.pluginConfig)!=null?o:[],e.pluginConfig.push({PluggableClass:n,category:t,method:r})},"pluginMethod"),nt=i(n=>(t,e)=>{var r;t.apiConfig=(r=t.apiConfig)!=null?r:[],t.apiConfig.push({api:n,method:e})},"apiMethod"),Kt=i((n,t)=>{var e;n.errorConfig=(e=n.errorConfig)!=null?e:[],n.errorConfig.push({method:t})},"errorMethod");var v=class{getWindow(){return this.core.window}getDocument(){return this.getWindow().document}getUserAgent(){var t,e;return(e=(t=this.getWindow().navigator)==null?void 0:t.userAgent)!=null?e:""}getPageUrl(){var t,e;return(e=(t=this.getWindow().location)==null?void 0:t.href)!=null?e:""}getHostname(){return new URL(this.getPageUrl()).hostname}getNavigator(){return this.getWindow().navigator}getPerformance(){var t;return(t=this.getWindow().performance)!=null?t:{}}getPerformanceTimeMs(){var t,e,r;return Math.floor((r=(e=(t=this.getPerformance()).now)==null?void 0:e.call(t))!=null?r:null)}isInQuirksMode(){return this.getDocument().compatMode==="BackCompat"}getDOMParser(){let t=this.getWindow().DOMParser;return new t}};i(v,"Environment"),v=u([p],v);var w=class{getPubAds(){var e,r;let t=this.core.get(v).getWindow();try{return(r=(e=t.googletag)==null?void 0:e.pubads)==null?void 0:r.call(e)}catch(o){return}}onPubAdsReady(t){var o,s,a,g;let e=this.core.get(v).getWindow();e.googletag=(o=e.googletag)!=null?o:{},e.googletag.cmd=(s=e.googletag.cmd)!=null?s:[];let r=this.getPubAds();if(r!=null)t(r);else try{(g=(a=e.googletag.cmd)==null?void 0:a.push)==null||g.call(a,()=>{r=this.getPubAds(),r!=null&&t(r)})}catch(f){}}};i(w,"GoogletagPubAds"),w=u([p],w);var xe=[[/((\?)|&)(?:amp_lite|fr=operanews)/g,"$2"],[/(^https?:\/\/)(www\.)/g,"$1"],[/(((\?)|&|%3F|%26|;)(?:utm_campaign|utm_source|utm_content|utm_term|utm_viral|utm_medium|utm_identifier|utm_key|fb_source|referrer|referer|ref|rand|rnd|randid|\.?rand|\.?partner|cb|count|adid|session|sessionid|session_redirect|param\d|userinfo|uid|refresh|ocid|ncid|clickenc|fbclid|amp_js_v|amp_gsa|ns_source|ns_campaign|ns_mchanel|ns_mchannel|ns_linkname|ns_fee|src|ex_cid|usqp|source|xid|trkid|utm_social-type|mbid|utm_brand|__twitter_impression|utm_referrer|CMP|cmp|_cmp|cq_cmp)=[^&]*)/g,"$3"],[/[/.]amp(?:\/[?&]*)?$/g,""],[/((\?)|&)(?:outputType|isFollow|suppressMediaBar|cid|ICID|icid|bdk|wtu_id_h|utm_placement|intcmp|_native_ads|traffic_source|entry|\.tsrc|autoplay|autostart|dc_data|influencer|pubdate|utm_hp_ref|redirect|service|refresh_ce|refresh_cens|xcmg|target_id|_amp)=[^&]*/g,"$2"],[/(\?|&)(?:amp)(?:&|$|=[^&]*)/g,"$1"]],we=[[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""],[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""]],$t=i((n,t)=>{for(let[e,r]of n)t=t.replace(e,r);return t},"replaceByRules"),Yt=i(n=>{let t=$t(xe,n);return $t(we,t)},"normalizeUrl");var Ht=i(n=>n.split("?",1)[0].split("#",1)[0],"stripUrlQuery");var A=[];for(let n=0;n<256;++n)A.push((n+256).toString(16).slice(1));function Wt(n,t=0){return(A[n[t+0]]+A[n[t+1]]+A[n[t+2]]+A[n[t+3]]+"-"+A[n[t+4]]+A[n[t+5]]+"-"+A[n[t+6]]+A[n[t+7]]+"-"+A[n[t+8]]+A[n[t+9]]+"-"+A[n[t+10]]+A[n[t+11]]+A[n[t+12]]+A[n[t+13]]+A[n[t+14]]+A[n[t+15]]).toLowerCase()}i(Wt,"unsafeStringify");var Rt,be=new Uint8Array(16);function Ut(){if(!Rt){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Rt=crypto.getRandomValues.bind(crypto)}return Rt(be)}i(Ut,"rng");var Pe=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ct={randomUUID:Pe};function Re(n,t,e){var o,s,a;if(Ct.randomUUID&&!t&&!n)return Ct.randomUUID();n=n||{};let r=(a=(s=n.random)!=null?s:(o=n.rng)==null?void 0:o.call(n))!=null?a:Ut();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){if(e=e||0,e<0||e+16>t.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let g=0;g<16;++g)t[e+g]=r[g];return t}return Wt(r)}i(Re,"v4");var Dt=Re;var L=i(()=>Dt(),"uuid");var Xt=i((n,t)=>{try{let e=new URLSearchParams(n),r=e.get("ctx"),o=e.get("cmp");if(r!=null&&o!=null)return{ctx:r,cmp:o,prefetch:t,legacy:!0}}catch(e){}return null},"parseInfo"),Jt=i(n=>{var t;return n.pathname!=="/signals/pub.js"?null:(t=Xt(n.search,!0))!=null?t:Xt(n.hash.substring(1),!1)},"parseLegacyPagetagUrl");var Ue=1e3,Ce=/^\/dvtag\/([^/]+)\/([^/]+)\/pub\.js$/,E=class{constructor(){d(this,"visit");d(this,"tagInfo");d(this,"plugins",{newVisit:i(t=>[],"newVisit")});d(this,"_normalizeUrl",Yt)}_initialize(){this.getTagInfo(),this.updateVisit(!1),this.plugins.newVisit(this.visit),this._installNavigationListener()}getTagInfo(){var t;if(this.tagInfo==null){try{this.tagInfo=this._parseTagInfo()}catch(e){}(t=this.tagInfo)!=null||(this.tagInfo={ctx:"unknown",cmp:"unknown"})}return this.tagInfo}_parseTagInfo(){let t=this.getCurrentScriptSrc();if(t==null)return null;let e=new URL(t,"https://pub.doubleverify.com"),r=e.pathname,o=Ce.exec(r);if(o!=null){let[,s,a]=o;return{ctx:s,cmp:a}}return Jt(e)}getCurrentScriptSrc(){var t,e;return(e=(t=this.core.window.document.currentScript)==null?void 0:t.getAttribute("src"))!=null?e:null}updateVisit(t=!0){var r,o;let e=this.getStrippedPageUrl();if(this.visit==null||this.visit.strippedUrl!==e){let s=L();this.visit={strippedUrl:e,normalizedUrl:this._normalizeUrl(this.core.window.location.href),uuid:s,sessionUuid:(o=(r=this.visit)==null?void 0:r.sessionUuid)!=null?o:s},t&&this.plugins.newVisit(this.visit)}return this.visit}getVisit(){var t;return(t=this.visit)!=null?t:this.updateVisit(!1)}getStrippedPageUrl(){return Ht(this.core.window.location.href)}getNormalizedPageUrl(){return this.getVisit().normalizedUrl}getVisitUuid(){return this.getVisit().uuid}getSessionUuid(){return this.getVisit().sessionUuid}_installNavigationListener(){let{window:t}=this.core,e=i(()=>this.updateVisit(!0),"cb");t.navigation!=null?t.navigation.addEventListener("navigatesuccess",e):setInterval(e,Ue)}};i(E,"Context"),u([tt],E.prototype,"_initialize",1),E=u([p],E);var O=class{getShortCommitId(){return"7d12da8"}getBuildTimestamp(){return 1739296829054}getAuthToken(){return typeof AUTH_TOKEN=="undefined"?"default":AUTH_TOKEN}};i(O,"DefinedVariables"),O=u([p],O);var Lt=class Lt{constructor(){d(this,"pending",[]);d(this,"flushing",!1)}push(t){this.pending.push(t),this.flush()}flush(){return y(this,null,function*(){var e;if(this.flushing)return;this.flushing=!0;let t=this.pending.shift();for(;t!=null;){try{yield t.promise}catch(r){}try{(e=t.callback)==null||e.call(t)}catch(r){}t=this.pending.shift()}this.flushing=!1})}};i(Lt,"AsyncQueue");var ht=Lt;var b=class{constructor(){d(this,"plugins",{adRequestQueued:i(t=>[],"adRequestQueued"),adRequestTimedOut:i(t=>[],"adRequestTimedOut"),adRequestBeforeRelease:i(t=>[],"adRequestBeforeRelease"),adRequestCompleted:i(t=>[],"adRequestCompleted")});d(this,"queue",new ht);d(this,"adRequestCounter",0)}_queueAdRequest(t={}){var s,a;let e={index:this.adRequestCounter++,status:"queued",timeoutValue:(s=t.timeout)!=null?s:0,onDvtagReadyCalled:(a=t.timestamp)!=null?a:0,waitingStarted:new Date().getTime(),internal:t.internal};this.core.get(E).updateVisit(),this.plugins.adRequestQueued(e);let r=t.callback;r===void 0?t.callback=()=>{}:r===null?e.status="tag-timeout":t.callback=()=>{e.status="queue-timeout",e.callbackCalled=new Date().getTime(),t.callback=null,this.plugins.adRequestTimedOut(e);try{r()}catch(g){}};let o=i(()=>{if(t.callback!=null){t.callback=null,e.status="success",e.callbackCalled=new Date().getTime(),this.plugins.adRequestBeforeRelease(e);try{r==null||r()}catch(g){}}else this.plugins.adRequestBeforeRelease(e);e.waitingEnded=new Date().getTime(),this.plugins.adRequestCompleted(e)},"onAsyncOperationsCompleted");this.queue.push({callback:o,adRequest:e})}delayAdRequests(t){this.queue.push({promise:t})}};i(b,"AdRequestQueue"),u([nt("queueAdRequest")],b.prototype,"_queueAdRequest",1),b=u([p],b);var Le="https://vtrk.doubleverify.com",Zt="dvtag",Oe=1,Ot=1,U=class{constructor(){d(this,"sharedDataPoints")}_onAdRequestCompleted(t){if(t.index!==0)return;let{timeoutValue:e,onDvtagReadyCalled:r,callbackCalled:o}=t,s=o!=null?o-r:e;this.fireEvent("ad-request",{cd111:t.status,cm106:t.index,cm107:s,cd112:t.internal?"legacy":"modern"},{sampleInterval:Ot})}_handleError(t){this.fireEvent("log",{cd111:"error",cd112:t.message,cd113:t.trace.join("=>")},{sampleInterval:Oe})}_getSharedDataPoints(){if(this.sharedDataPoints==null){let t=this.core.get(E),e=this.core.get(O),r=this.core.get(v),{ctx:o,cmp:s,legacy:a}=t.getTagInfo(),g=r.getHostname(),f=t.getSessionUuid(),m=e.getShortCommitId();this.sharedDataPoints={cd102:m,cd103:"",cd107:f,cd109:a?"legacy":"modern",cd108:"",cd105:o,cd106:s,cd104:g}}return this.sharedDataPoints}fireEvent(t,e,{sampleInterval:r=1,trackerUuid:o=L(),spoofWrapperId:s=!1}={}){if(Math.random()>=1/r)return;e=rt(X(X({},e),this._getSharedDataPoints()),{cd101:t,cm101:r});let a=rt(X({ec:Zt,ea:e.cd101,ctx:s?Zt:e.cd105,cmp:e.cd106},e),{cid:o,t:"event",v:1,z:o,cd160:o}),g=new URL(Le);for(let[f,m]of Object.entries(a))m!=null&&g.searchParams.set(f,`${m}`);this._sendBeacon(g.href)}_sendBeacon(t){try{typeof(navigator==null?void 0:navigator.sendBeacon)=="function"?navigator.sendBeacon(t):new Image().src=t}catch(e){}}};i(U,"Events"),u([R(b,"adRequestCompleted")],U.prototype,"_onAdRequestCompleted",1),u([Kt],U.prototype,"_handleError",1),U=u([p],U);var ct=["BSC","ABS","CCT","CBS"],Mt=["IDS"],ut=["VLP","TVP"],kt=[...ct,...Mt,...ut],St=[...ct,...Mt,...ut].filter(n=>n!=="CCT"),Gt=i(n=>kt.includes(n.toUpperCase()),"isSignal"),yt=i(n=>ut.includes(n.toUpperCase()),"isSlotSignal"),te=i(n=>Mt.includes(n.toUpperCase()),"isUserSignal"),ee=i(n=>ct.includes(n.toUpperCase()),"isPageSignal"),re=i(n=>n.map(t=>t.toUpperCase()).filter(Gt),"asSignals");var M=class{constructor(){d(this,"pq",null)}getPq(){return this.pq==null&&(this.pq=this._initialize()),this.pq}getPts(){return this.getPq().PTS}setApi(t){let e=this.getPq();e!=null&&(e.init=()=>{},e.loadSignals=t.loadSignals,e.loadSignalsForSlots=t.loadSignalsForSlots,e.getTargeting=t.getTargeting)}_pushToDvtagCmd(...t){var e;this.core.dvtag.cmd=(e=this.core.dvtag.cmd)!=null?e:[],this.core.dvtag.cmd.push(...t)}_initialize(){var r,o;this.core.window.PQ=(r=this.core.window.PQ)!=null?r:{};let t=this.core.window.PQ;if(t.loaded)return{cmd:[],PTS:{}};t.loaded=!0,t.PTS=(o=t.PTS)!=null?o:{};let e=t.cmd;return t.cmd={push:i(s=>this._pushToDvtagCmd(s),"push")},Array.isArray(e)&&this._pushToDvtagCmd(...e),t}};i(M,"LegacyPq"),M=u([p],M);var ot=i(n=>{if(n==null)return[];let t=ne(n);return t!=null?[t]:Array.isArray(n)?n.map(ne).filter(e=>e!=null):[]},"parseSlotSizes"),ne=i(n=>{if(n==null)return null;if(typeof n=="string")return{label:n};if(Array.isArray(n)){if(n.length===1&&typeof n[0]=="string")return{label:n[0]};if(n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number")return{width:n[0],height:n[1]}}if(typeof n=="object"){let{label:t,width:e,height:r}=n;if(typeof e=="number"&&typeof r=="number")return{width:e,height:r};if(typeof t=="string")return{label:t}}return null},"parseSlotSize");var Me=/^(\d+)x(\d+)$/,oe=i(n=>n==="all"?[]:n.split(",").map(t=>{let e=t.match(Me);return e==null?{label:t}:{width:parseInt(e[1],10),height:parseInt(e[2],10)}}),"stringToSlotSizes"),dt=i(n=>n.length===0?"all":n.map(({width:t,height:e,label:r})=>r!=null?r:`${t}x${e}`).join(","),"slotSizesToString"),ie=i(n=>n==null?"":n.length>0&&n.every(({label:r})=>r==null)?dt(n):"","slotSizesToStringIfSpecific");var se=i(n=>{var r,o,s;let t=L(),e={id:(o=(r=n.adUnitPath)!=null?r:n.invCode)!=null?o:n.tagId,sizes:ot(oe((s=n.sizes)!=null?s:"all")),position:n.position};return{elementId:t,adUnit:e}},"parseLegacyAdUnit");var ae=i(n=>{try{return n.getSizes()}catch(t){return[]}},"getGptSlotSizesSafe");var le="dvp_spos";var ge=i(n=>({elementId:n.getSlotElementId(),adUnit:{id:n.getAdUnitPath(),sizes:ot(ae(n)),position:n.getTargeting(le)[0]}}),"parseLegacyGptSlot");var ce=i((n,t)=>(t==null?void 0:t.structuredClone)!=null?t.structuredClone(n):JSON.parse(JSON.stringify(n)),"deepClone");var it="qt_loaded",Et="pts_pid",ue="pts_sid",Nt=class Nt extends Error{constructor(e,r){super(r);this.code=e}};i(Nt,"QtError");var Tt=Nt;var de=i((n,t)=>{var o;let e=(o=n.IDS)==null?void 0:o[0];if(e==null)return;let r=parseInt(e);isNaN(r)||(t.IDS=r)},"setUserTargetingOnPts"),pe=i((n,t)=>{for(let e of ct)n[e]!=null&&(t[e]=n[e])},"setPageTargetingOnPts"),me=i((n,t,e)=>{var g,f,m,h,I,P;let{adUnit:r}=n;if((r==null?void 0:r.id)==null)return;let o=r.id,s=dt((g=r.sizes)!=null?g:[]),a=r.position;for(let T of ut){let x=t[T];x!=null&&((f=e[T])!=null||(e[T]={}),(h=(m=e[T])[o])!=null||(m[o]={}),e[T][o][s]=x[0],a!=null&&((P=(I=e[T][o])[a])!=null||(I[a]={}),e[T][o][a][s]=x[0]))}},"setSlotTargetingOnPts");var qt=i(n=>[...new Set(n.filter(Gt).map(t=>t.toLowerCase()))],"getGreenlightSignal");var K=class{autoInsertPageId(){let e=this.core.get(E).getVisitUuid();this.core.get(w).onPubAdsReady(r=>{r.setTargeting(Et,e)})}autoInsertGlobalTargeting(t){this.core.get(w).onPubAdsReady(e=>{for(let[r,o]of Object.entries(t))e.setTargeting(r,o);e.setTargeting(it,qt([...e.getTargeting(it),...Object.keys(t)]))})}autoInsertSlotId(t){this.core.get(w).onPubAdsReady(e=>{let r=e.getSlots().find(o=>o.getSlotElementId()===t.elementId);r!=null&&r.setTargeting(ue,t.uuid)})}autoInsertSlotTargeting(t,e){this.core.get(w).onPubAdsReady(r=>{let o=r.getSlots().find(s=>s.getSlotElementId()===t.elementId);if(o!=null){for(let[s,a]of Object.entries(e))o.setTargeting(s,a);o.setTargeting(it,qt([...r.getTargeting(it),...o.getTargeting(it),...Object.keys(e)]))}})}};i(K,"LegacyModeAutoInsertion"),K=u([p],K);var k=class{constructor(){d(this,"cache",{})}_performFetchJson(t,e){return y(this,null,function*(){let r=t;if(e!=null&&e.authToken){let a=this.core.get(O).getAuthToken(),g=new URL(t);g.searchParams.set("token",a),r=g.href}let o=yield this.core.window.fetch(r);return{json:yield o.json(),headers:o.headers}})}fetchJson(t,e){return y(this,null,function*(){let r=this.cache[t];return r==null&&(r=this._performFetchJson(t,e).then(o=>o.json),this.cache[t]=r),r})}};i(k,"Fetch"),k=u([p],k);var fe=i(n=>n==null?"":`@${n}`,"getPositionSuffix");var ke="https://pub.doubleverify.com/dvtag/signals/",G=class{_getBaseUrl(t){let e=this.core.get(E),{ctx:r,cmp:o}=e.getTagInfo(),s=e.getNormalizedPageUrl();try{s=new URL(s).origin}catch(g){}let a=new URL(t,ke);return a.searchParams.set("ctx",r),a.searchParams.set("cmp",o),a.searchParams.set("url",s),a}getUserTargetingUrl(t){let e=this._getBaseUrl("ids/pub.json");return t.includes("IDS")&&e.searchParams.set("ids","1"),e.href}getPageTargetingUrl(t,e){let r=this._getBaseUrl("bsc/pub.json");return r.searchParams.set("url",e),t.includes("BSC")&&r.searchParams.set("bsc","1"),t.includes("ABS")&&r.searchParams.set("abs","1"),t.includes("CBS")&&r.searchParams.set("cbs","1"),t.includes("CCT")&&r.searchParams.set("cct","1"),r.href}getSlotTargetingUrl(t,e){var s;let r=this._getBaseUrl("vlp/pub.json");t.includes("VLP")&&r.searchParams.set("vlp","1"),t.includes("TVP")&&r.searchParams.set("tvp","1");let o=0;for(let a of e){let{id:g,position:f,sizes:m}=(s=a.adUnit)!=null?s:{},h=g+fe(f);r.searchParams.set(`slot-${o++}-${h}`,ie(m))}return r.href}};i(G,"SignalsUrlBuilder"),G=u([p],G);var $=class{_getUserTargeting(t){return y(this,null,function*(){if(!t.some(te))return{};let e=this.core.get(G).getUserTargetingUrl(t);try{return yield this.core.get(k).fetchJson(e,{authToken:!0})}catch(r){return{}}})}_getPageTargeting(t){return y(this,null,function*(){if(!t.some(ee))return{};let e=this.core.get(E).getNormalizedPageUrl(),r=this.core.get(G).getPageTargetingUrl(t,e);try{return yield this.core.get(k).fetchJson(r,{authToken:!0})}catch(o){return{}}})}_getSlotTargeting(t,e){return y(this,null,function*(){if(!t.some(yt)||e.length===0)return new Array(e.length).fill({});let r=this.core.get(G).getSlotTargetingUrl(t,e);try{let o=yield this.core.get(k).fetchJson(r,{authToken:!0});return o.length!==e.length?new Array(e.length).fill({}):o.map(s=>Object.fromEntries(Object.entries(s).map(([a,g])=>[a,[g[0]]])))}catch(o){return new Array(e.length).fill({})}})}getTargeting(t,e){return y(this,null,function*(){let[r,o,s]=yield Promise.all([this._getUserTargeting(t),this._getPageTargeting(t),this._getSlotTargeting(t,e)]);return{userTargeting:r,pageTargeting:o,slotTargeting:s}})}};i($,"LegacyModeFetchTargeting"),$=u([p],$);var Ge={SignalsIds:"IDS",SignalsBsc:"BSC",SignalsAbs:"ABS",SignalsVlp:"VLP",SignalsTvp:"TVP"},Ne="SignalsAutoInsertion",N=class{constructor(){d(this,"validConfigFound");d(this,"enabledSignals");d(this,"autoInsertionEnabled")}isValidConfigFound(){return this._initialize(),this.validConfigFound}isSignalEnabled(t){return this._initialize(),t!=null&&this.enabledSignals.includes(t)}isAutoInsertionEnabled(){return this._initialize(),this.autoInsertionEnabled}_initialize(){if(this.validConfigFound!=null)return;let t;try{t=this._getEntryModules()}catch(e){this.validConfigFound=!0,this.enabledSignals=kt,this.autoInsertionEnabled=!0;return}if(t==null){this.validConfigFound=!1,this.enabledSignals=[],this.autoInsertionEnabled=!1;return}this.validConfigFound=!0,this.enabledSignals=t.map(e=>Ge[e]).filter(e=>e!=null),this.autoInsertionEnabled=t.includes(Ne)}_getEntryModules(){let{cmp:t}=this.core.get(E).getTagInfo(),e=btoa(t),{modules:r,configs:o}=l,s=o[e];return s==null?null:s.map(a=>r[a])}};i(N,"TagConfig"),N=u([p],N);var he=i((n,t)=>{var s,a,g,f;let e=[],r=[],o=[];if(t.VLP==null)return{newSlots:n,existingSlots:r,existingTargeting:o};for(let m of n){let{id:h,sizes:I}=m.adUnit,P=dt(I),T=(a=(s=t.VLP)==null?void 0:s[h])==null?void 0:a[P];if(T==null){e.push(m);continue}r.push(m);let x=(f=(g=t.TVP)==null?void 0:g[h])==null?void 0:f[P],D={};T!=null&&(D.VLP=[T]),x!=null&&(D.TVP=[x]),o.push(D)}return{newSlots:e,existingSlots:r,existingTargeting:o}},"processNewSlots");var V=class{performFetches(t,e,r,o){return y(this,null,function*(){let s=this.core.get($),a=this.core.get(K),g=this.core.get(N),m=this.core.get(M).getPts();if(!g.isValidConfigFound())throw new Tt("404","Config not found!");let h=re(t).filter(S=>g.isSignalEnabled(S)).filter(S=>yt(S)||m[S]==null),{newSlots:I,existingSlots:P,existingTargeting:T}=o?he(e,m):{newSlots:e,existingSlots:[],existingTargeting:[]};e=[...I,...P];let{userTargeting:x,pageTargeting:D,slotTargeting:_t}=yield s.getTargeting(h,I),F=[..._t,...T];de(x,m),pe(D,m);for(let S=0;S<e.length;S++)me(e[S],F[S],m);if(r&&g.isAutoInsertionEnabled()){a.autoInsertPageId(),a.autoInsertGlobalTargeting(x),a.autoInsertGlobalTargeting(D);for(let S=0;S<e.length;S++)a.autoInsertSlotId(e[S]),a.autoInsertSlotTargeting(e[S],F[S])}return ce(m,this.core.window)})}};i(V,"LegacyModePerformFetches"),V=u([p],V);var zt="legacy-success",Ft="legacy-error",et=class{constructor(){d(this,"_slotUuids",{});d(this,"_metricEventCount",0)}_initialize(){this.core.get(M).setApi({loadSignals:this.loadSignals.bind(this),loadSignalsForSlots:this.loadSignalsForSlots.bind(this),getTargeting:this.getTargeting.bind(this)})}loadSignals(t,e){return y(this,null,function*(){let r=this.core.get(V),o=this.core.get(N),s=this._prepareMetricEvent(),g=o.isSignalEnabled("VLP")||o.isSignalEnabled("TVP")?yield this._getSlots():[],f=!0,m=!1;try{yield r.performFetches(St,g,f,m);try{e==null||e()}catch(h){}s(zt)}catch(h){try{e==null||e(h)}catch(I){}s(Ft)}})}loadSignalsForSlots(t,e,r){return y(this,null,function*(){let o=this.core.get(V),s=this._prepareMetricEvent(),a=t.map(m=>this._parseGptSlot(m)),g=!0,f=!0;r=typeof e=="function"?e:r;try{yield o.performFetches(St,a,g,f);try{r==null||r()}catch(m){}s(zt)}catch(m){try{r==null||r(m)}catch(h){}s(Ft)}})}getTargeting(t,e){return y(this,null,function*(){var f,m;let r=this.core.get(V),o=this._prepareMetricEvent(),s=(m=(f=t.adUnits)==null?void 0:f.map(h=>this._parseAdUnit(h)))!=null?m:[],a=!1,g=!1;try{let h=yield r.performFetches(St,s,a,g);try{e==null||e(void 0,h)}catch(I){}o(zt)}catch(h){try{e==null||e(h)}catch(I){}o(Ft)}})}_getSlots(){return y(this,null,function*(){return(yield new Promise(e=>this.core.get(w).onPubAdsReady(r=>e(r.getSlots())))).map(e=>this._parseGptSlot(e))})}_getSlotUuid(t){let e=this._slotUuids[t];return e==null&&(e=L(),this._slotUuids[t]=e),e}_parseGptSlot(t){let{elementId:e,adUnit:r}=ge(t);return{elementId:e,uuid:this._getSlotUuid(r.id),adUnit:rt(X({},r),{position:null})}}_parseAdUnit(t){let{adUnit:e}=se(t);return{elementId:e.id,uuid:this._getSlotUuid(e.id),adUnit:rt(X({},e),{position:null})}}_prepareMetricEvent(){let t=this.core.get(U);if(this._metricEventCount>0)return()=>{};this._metricEventCount++;let e=new Date().getTime();return r=>t.fireEvent("ad-request",{cd111:r,cm106:0,cm107:new Date().getTime()-e,cd112:"legacy"},{sampleInterval:Ot})}};i(et,"LegacyMode"),u([tt],et.prototype,"_initialize",1),et=u([p],et);var Qt=class Qt{constructor(t,e,r,o=L(),s=Date.now()){this.adServer=t;this.elementId=e;this.adUnit=r;this.uuid=o;this.creationTime=s;d(this,"_variables",new Map)}setVariable(t,e){this._variables.set(t,e)}getVariable(t){return this._variables.get(t)}hasVariable(t){return this._variables.has(t)}clearVariable(t){this._variables.delete(t)}};i(Qt,"Slot");var pt=Qt;var _=class{constructor(){d(this,"plugins",{slotDiscovered:i((t,e)=>[],"slotDiscovered"),slotDestroyed:i(t=>[],"slotDestroyed")});d(this,"_slots",{})}getSlot(t,e){var r;return(r=this._slots[t])==null?void 0:r[e]}getSlots(t){var e;if(t==null){let r=[];for(let o of Object.values(this._slots))r.push(...Object.values(o));return r}return Object.values((e=this._slots[t])!=null?e:{})}createSlot(t,e,r,o,s){var f,m;let a=this.getSlot(t,r);a!=null&&this.plugins.slotDestroyed(a);let g=new pt(t,r,o);return(m=(f=this._slots)[t])!=null||(f[t]={}),this._slots[t][r]=g,s==null||s(g),this.plugins.slotDiscovered(g,e),g}};i(_,"SlotStore"),_=u([p],_);var Se=i(n=>{if(typeof n=="string"||Array.isArray(n)&&n.length===2&&n.every(t=>typeof t=="number"))return n;if(n!=null&&typeof n.width=="number"&&typeof n.height=="number")return[n.width,n.height]},"cleanSizeInput");var Y=i(n=>{if(typeof n=="string")return n;if(typeof n=="number")return`${n}`},"cleanStringInput");var jt=class jt{set(t,e){t.setVariable(this,e)}get(t){return t.getVariable(this)}getOrDefault(t,e){return t.hasVariable(this)?this.get(t):(this.set(t,e),e)}getOrDefaultFromFunction(t,e){if(t.hasVariable(this))return this.get(t);let r=e();return this.set(t,r),r}delete(t){t.clearVariable(this)}};i(jt,"SlotVariable");var H=jt;var ye={gpt:"google_ads_iframe_",ast:"utif_"},W=class{_getIframeDocument(t){try{return t.contentDocument}catch(e){return null}}_isIframeSameOrigin(t,e){if(e==null)return!1;if(t.src===""||t.src==="about:blank")return!0;let r=this.core.get(v).getPageUrl();try{return new URL(t.src).origin===new URL(r).origin}catch(o){return!1}}_findIframe(t,e){if(ye[e]==null)return null;let o=t.querySelectorAll(`iframe[id^="${ye[e]}"]`);return o.length===1?o[0]:null}getAdContainer(t,e){if((e==null?void 0:e.type)!=="display")return{};let{elementId:r,adServer:o}=t,a=this.core.get(v).getDocument().getElementById(r);if(a==null)return{};let g=this._findIframe(a,o);if(g==null)return{slotElement:a};let f=this._getIframeDocument(g);return this._isIframeSameOrigin(g,f)?{slotElement:a,sameOriginIframe:g,sameOriginIframeDocument:f}:{slotElement:a,crossOriginIframe:g}}};i(W,"AdLocator"),W=u([p],W);var q=class{constructor(){d(this,"plugins",{adRemoved:i(t=>[],"adRemoved")})}_monitorAdRemoval(t){let e=this.core.get(v).getDocument().getElementById(t.elementId);if(e==null)return;new MutationObserver(o=>{let s=o.length,a=0,g=e.children.length;for(let f=o.length-1;f>=0;f--){let m=o[f];if(g===0){this.plugins.adRemoved(t);break}if(a===s-1)break;let h=m.removedNodes.length-m.addedNodes.length;g+=h,a++}}).observe(e,{childList:!0})}_onSlotDestroyed(t){this.plugins.adRemoved(t)}};i(q,"AdRemoved"),u([R(_,"slotDiscovered")],q.prototype,"_monitorAdRemoval",1),u([R(_,"slotDestroyed")],q.prototype,"_onSlotDestroyed",1),q=u([p],q);var Q=class{constructor(){d(this,"adEmpty",new H);d(this,"adRequestInFlight",new H);d(this,"nonEmptyAdResponses",new H);d(this,"plugins",{adRequested:i(t=>[],"adRequested"),adRequestedOrInferred:i(t=>[],"adRequestedOrInferred"),adRendered:i((t,e,r)=>[],"adRendered"),adRemoved:i(t=>[],"adRemoved")})}setAdRequested(t){this.adRequestInFlight.set(t,!0),this.plugins.adRequested(t),this.plugins.adRequestedOrInferred(t)}setAdRendered(t,e){this.adRequestInFlight.get(t)!==!0&&this.plugins.adRequestedOrInferred(t),this._setAdRemoved(t),this.adEmpty.set(t,!1),this.adRequestInFlight.set(t,!1),e!=null&&this.nonEmptyAdResponses.set(t,this.nonEmptyAdResponses.getOrDefault(t,0)+1);let r=this.core.get(W).getAdContainer(t,e);this.plugins.adRendered(t,e,r)}_setAdRemoved(t){this.adEmpty.get(t)===!1&&(this.adEmpty.set(t,!0),this.plugins.adRemoved(t))}getNonEmptyAdRenderedCount(t){return this.nonEmptyAdResponses.getOrDefault(t,0)}};i(Q,"AdServerHub"),u([R(q,"adRemoved")],Q.prototype,"_setAdRemoved",1),Q=u([p],Q);var mt=i((...n)=>{let t=[];for(let e of n)if(e!=null)for(let r of e)t.includes(r)||t.push(r);return t},"mergeUnique");var C=class{constructor(){d(this,"plugins",{getAdServerTargeting:i((t,e)=>[],"getAdServerTargeting"),setAdServerTargeting:i((t,e,r)=>[],"setAdServerTargeting")});d(this,"globalTargeting",{});d(this,"slotTargeting",new H)}_getSlotTargeting(t){var r;let e=(r=this.slotTargeting.get(t))!=null?r:{};return this.slotTargeting.set(t,e),e}_getTargetingKeys(t){return mt(Object.keys(this.globalTargeting),Object.keys(this._getSlotTargeting(t)))}_getTargetingValues(t,e){return mt(this.globalTargeting[e],this._getSlotTargeting(t)[e])}getTargeting(t){let e={};if(t==null)for(let r of Object.keys(this.globalTargeting))e[r]=[...this.globalTargeting[r]];else for(let r of this._getTargetingKeys(t))e[r]=this._getTargetingValues(t,r);return e}setSlotTargeting(t,e,r=!1){var a;let o=Object.keys(e),s=this._getSlotTargeting(t);for(let g of o)s[g]=mt(e[g],r?(a=this.slotTargeting.get(t))==null?void 0:a[g]:null);this.setAdServerTargeting(t,o)}setGlobalTargeting(t,e=!1){let r=Object.keys(t);for(let o of r)this.globalTargeting[o]=mt(t[o],e?this.globalTargeting[o]:null);for(let o of this.core.get(_).getSlots())this.setAdServerTargeting(o,r)}getAdServerTargeting(t,e){var r;return(r=this.plugins.getAdServerTargeting(t,e).find(o=>o.length!==0))!=null?r:[]}setAdServerTargeting(t,e){e==null&&(e=this._getTargetingKeys(t));for(let r of e)this.plugins.setAdServerTargeting(t,r,this._getTargetingValues(t,r))}_onSlotDiscovered(t){this.setAdServerTargeting(t)}};i(C,"TargetingHub"),u([R(_,"slotDiscovered")],C.prototype,"_onSlotDiscovered",1),C=u([p],C);var z=class{_defineSlot(t,e={}){if(typeof t!="string"||e==null||typeof e!="object")return;let r={id:Y(e.id),network:Y(e.network),sizes:e.sizes!=null?ot(e.sizes):void 0,position:Y(e.position)};this.core.get(_).createSlot("custom",0,t,r)}_adRendered(t,e){if(typeof t!="string"||e==null||typeof e!="object")return;let r=this.core.get(_).getSlot("custom",t);if(r==null)return;let o={type:"display",advertiserId:Y(e.advertiserId),campaignId:Y(e.campaignId),creativeId:Y(e.creativeId),lineItemId:Y(e.lineItemId),renderedSize:Se(e.renderedSize)};this.core.get(Q).setAdRendered(r,o)}_getTargeting(t){let e=this.core.get(C);if(typeof t!="string")return e.getTargeting();let r=this.core.get(_).getSlot("custom",t);return e.getTargeting(r)}};i(z,"CustomAdServer"),u([nt("defineSlot")],z.prototype,"_defineSlot",1),u([nt("getTargeting")],z.prototype,"_getTargeting",1),z=u([p],z);var ze=Et,j=class{constructor(){d(this,"restoreCount",0)}getRestoreCount(){return this.restoreCount}_restoreTargeting(){let t=this.core.get(C);for(let e of this.core.get(_).getSlots())t.getAdServerTargeting(e,ze).length===0&&(t.setAdServerTargeting(e),this.restoreCount+=1)}};i(j,"TargetingRestorer"),u([R(b,"adRequestQueued")],j.prototype,"_restoreTargeting",1),j=u([p],j);var B=class{constructor(){d(this,"initialized",!1);d(this,"size",0)}_initialize(){return y(this,null,function*(){if(yield Promise.resolve(),this.initialized)return;this.initialized=!0,this.core.dvtag.cmd instanceof Array||(this.core.dvtag.cmd=[]);let t=this.core.dvtag.cmd;this.core.dvtag.cmd={push:i((...e)=>{for(let r of e)try{r()}catch(o){}return this.size+=e.length,this.size},"push")},this.core.dvtag.cmd.push(...t)})}};i(B,"CommandBuffer"),u([tt],B.prototype,"_initialize",1),B=u([p],B);var st=class{};i(st,"HouseHold"),st=u([p,Z(b),Z(B),Z(U),Z(z),Z(j)],st);if(window.dvtag==null||window.dvtag._core==null)try{new gt(Pt,window)}catch(n){}})();
